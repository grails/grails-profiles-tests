install: true
jdk:
  - oraclejdk8
script:
  - pwd
  - curl -s get.sdkman.io | bash
  - source "$HOME/.sdkman/bin/sdkman-init.sh"
  - echo sdkman_auto_answer=true > ~/.sdkman/etc/config
  - source "/home/travis/.sdkman/bin/sdkman-init.sh"
  - ./gradlew build --console=plain
  - sdk install grails dev /home/travis/build/grails/grails-profiles-tests/build/grails-core
  - sdk install grails
  - sdk use grails dev
  - grails create-app demo
  - mkdir -p $HOME/.grails/wrapper
  - cp wrapper/grails-wrapper.jar $HOME/.grails/wrapper/grails-wrapper.jar
  - cd demo
  - touch settings.gradle
  - ./grailsw create-controller Book
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
